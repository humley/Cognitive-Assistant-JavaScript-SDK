var h=function(){function e(a,d){for(var b=0;b<d.length;b++){var c=d[b];c.enumerable=c.enumerable||!1;c.configurable=!0;"value"in c&&(c.writable=!0);Object.defineProperty(a,c.key,c)}}return function(a,d,b){d&&e(a.prototype,d);b&&e(a,b);return a}}();
function k(e,a,d){return new (a||(a=Promise))(function(b,c){function m(a){try{f(d.next(a))}catch(b){c(b)}}function g(a){try{f(d["throw"](a))}catch(b){c(b)}}function f(d){d.done?b(d.value):(new a(function(a){a(d.value)})).then(m,g)}f((d=d.apply(e,void 0)).next())})}
(function(){function e(a){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.A="http://api.humley.com/conversation/live/Conversation.svc";this.credential=a}h(e,[{key:"init",value:function(a){return k(this,Promise,regeneratorRuntime.mark(function b(){var c;return regeneratorRuntime.v(function(b){for(;;)switch(b.s=b.next){case 0:return this.a=a,c=this.O(),b.next=4,this.client(c,l.w);case 4:return b.o("return",b.H);case 5:case "end":return b.stop()}},b,this)}))}},{key:"talk",
value:function(a,d,b){return k(this,Promise,regeneratorRuntime.mark(function m(){var g;return regeneratorRuntime.v(function(f){for(;;)switch(f.s=f.next){case 0:return g=this.N(a,d,b),f.next=3,this.client(g,l.L);case 3:return f.o("return",f.H);case 4:case "end":return f.stop()}},m,this)}))}},{key:"buildStartData",value:function(){return{I:this.credential.username,p:this.credential.password,F:this.a.F,u:this.a.u,C:this.credential.G,b:this.a.b,h:this.a.h,f:this.a.f,m:this.a.m,J:navigator.userAgent,j:this.a.j,
l:this.a.l,g:this.a.g,D:navigator.language,B:moment().format("YYYY-MM-DD h:mm:ss")}}},{key:"buildChatData",value:function(a,d,b){return{I:this.credential.username,p:this.credential.password,q:b,u:d,C:this.credential.G,b:this.a.b,h:this.a.h,f:this.a.f,m:this.a.m,J:navigator.userAgent,j:this.a.j,l:this.a.l,g:this.a.g,D:navigator.language,B:moment().format("YYYY-MM-DD h:mm:ss"),P:a}}},{key:"client",value:function(a,d){return k(this,Promise,regeneratorRuntime.mark(function c(){var e=this;return regeneratorRuntime.v(function(c){for(;;)switch(c.s=
c.next){case 0:return c.o("return",new Promise(function(c,g){$.T({url:e.A,method:l[d],K:d===l.w?"http://tempuri.org/IConversation/OpenConv":"http://tempuri.org/IConversation/Talk",M:!1,R:{c:"http://schemas.xmlsoap.org/soap/encoding/",d:"http://www.w3.org/2001/XMLSchema",i:"http://www.w3.org/2001/XMLSchema-instance"},S:"http://tempuri.org/",data:a,U:function(a){c(a.toJSON())},error:function(a){g(a.toString())}})}));case 1:case "end":return c.stop()}},c,this)}))}}]);return e})();var l,n=l||(l={});
n[n.OpenConv=0]="OpenConv";n[n.Talk=1]="Talk";